{
  "version": 3,
  "sources": ["../../filepond-plugin-file-poster/dist/filepond-plugin-file-poster.esm.js"],
  "sourcesContent": ["/*!\r\n * FilePondPluginFilePoster 2.5.2\r\n * Licensed under MIT, https://opensource.org/licenses/MIT/\r\n * Please visit https://pqina.nl/filepond/ for details.\r\n */\r\n\r\n/* eslint-disable */\r\n\r\nconst IMAGE_SCALE_SPRING_PROPS = {\r\n  type: 'spring',\r\n  stiffness: 0.5,\r\n  damping: 0.45,\r\n  mass: 10\r\n};\r\n\r\nconst createPosterView = _ =>\r\n  _.utils.createView({\r\n    name: 'file-poster',\r\n    tag: 'div',\r\n    ignoreRect: true,\r\n    create: ({ root }) => {\r\n      root.ref.image = document.createElement('img');\r\n      root.element.appendChild(root.ref.image);\r\n    },\r\n    write: _.utils.createRoute({\r\n      DID_FILE_POSTER_LOAD: ({ root, props }) => {\r\n        const { id } = props;\r\n\r\n        // get item\r\n        const item = root.query('GET_ITEM', { id: props.id });\r\n        if (!item) return;\r\n\r\n        // get poster\r\n        const poster = item.getMetadata('poster');\r\n        root.ref.image.src = poster;\r\n\r\n        // let others know of our fabulous achievement (so the image can be faded in)\r\n        root.dispatch('DID_FILE_POSTER_DRAW', { id });\r\n      }\r\n    }),\r\n    mixins: {\r\n      styles: ['scaleX', 'scaleY', 'opacity'],\r\n      animations: {\r\n        scaleX: IMAGE_SCALE_SPRING_PROPS,\r\n        scaleY: IMAGE_SCALE_SPRING_PROPS,\r\n        opacity: { type: 'tween', duration: 750 }\r\n      }\r\n    }\r\n  });\r\n\r\nconst applyTemplate = (source, target) => {\r\n  // copy width and height\r\n  target.width = source.width;\r\n  target.height = source.height;\r\n\r\n  // draw the template\r\n  const ctx = target.getContext('2d');\r\n  ctx.drawImage(source, 0, 0);\r\n};\r\n\r\nconst createPosterOverlayView = fpAPI =>\r\n  fpAPI.utils.createView({\r\n    name: 'file-poster-overlay',\r\n    tag: 'canvas',\r\n    ignoreRect: true,\r\n    create: ({ root, props }) => {\r\n      applyTemplate(props.template, root.element);\r\n    },\r\n    mixins: {\r\n      styles: ['opacity'],\r\n      animations: {\r\n        opacity: { type: 'spring', mass: 25 }\r\n      }\r\n    }\r\n  });\r\n\r\nconst getImageSize = (url, cb) => {\r\n  let image = new Image();\r\n  image.onload = () => {\r\n    const width = image.naturalWidth;\r\n    const height = image.naturalHeight;\r\n    image = null;\r\n    cb(width, height);\r\n  };\r\n  image.src = url;\r\n};\r\n\r\nconst easeInOutSine = t => -0.5 * (Math.cos(Math.PI * t) - 1);\r\n\r\nconst addGradientSteps = (\r\n  gradient,\r\n  color,\r\n  alpha = 1,\r\n  easeFn = easeInOutSine,\r\n  steps = 10,\r\n  offset = 0\r\n) => {\r\n  const range = 1 - offset;\r\n  const rgb = color.join(',');\r\n  for (let i = 0; i <= steps; i++) {\r\n    const p = i / steps;\r\n    const stop = offset + range * p;\r\n    gradient.addColorStop(stop, `rgba(${rgb}, ${easeFn(p) * alpha})`);\r\n  }\r\n};\r\n\r\nconst MAX_WIDTH = 10;\r\nconst MAX_HEIGHT = 10;\r\n\r\nconst calculateAverageColor = image => {\r\n  const scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\r\n\r\n  const canvas = document.createElement('canvas');\r\n  const ctx = canvas.getContext('2d');\r\n  const width = (canvas.width = Math.ceil(image.width * scalar));\r\n  const height = (canvas.height = Math.ceil(image.height * scalar));\r\n  ctx.drawImage(image, 0, 0, width, height);\r\n  let data = null;\r\n  try {\r\n    data = ctx.getImageData(0, 0, width, height).data;\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n  const l = data.length;\r\n\r\n  let r = 0;\r\n  let g = 0;\r\n  let b = 0;\r\n  let i = 0;\r\n\r\n  for (; i < l; i += 4) {\r\n    r += data[i] * data[i];\r\n    g += data[i + 1] * data[i + 1];\r\n    b += data[i + 2] * data[i + 2];\r\n  }\r\n\r\n  r = averageColor(r, l);\r\n  g = averageColor(g, l);\r\n  b = averageColor(b, l);\r\n\r\n  return { r, g, b };\r\n};\r\n\r\nconst averageColor = (c, l) => Math.floor(Math.sqrt(c / (l / 4)));\r\n\r\nconst drawTemplate = (canvas, width, height, color, alphaTarget) => {\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  const horizontalCenter = width * 0.5;\r\n\r\n  const grad = ctx.createRadialGradient(\r\n    horizontalCenter,\r\n    height + 110,\r\n    height - 100,\r\n    horizontalCenter,\r\n    height + 110,\r\n    height + 100\r\n  );\r\n\r\n  addGradientSteps(grad, color, alphaTarget, undefined, 8, 0.4);\r\n\r\n  ctx.save();\r\n  ctx.translate(-width * 0.5, 0);\r\n  ctx.scale(2, 1);\r\n  ctx.fillStyle = grad;\r\n  ctx.fillRect(0, 0, width, height);\r\n  ctx.restore();\r\n};\r\n\r\nconst hasNavigator = typeof navigator !== 'undefined';\r\nconst hasDocument = typeof document !== 'undefined';\r\n\r\nconst width = 500;\r\nconst height = 200;\r\n\r\nconst overlayTemplateShadow =\r\n  hasNavigator && hasDocument && document.createElement('canvas');\r\nconst overlayTemplateError =\r\n  hasNavigator && hasDocument && document.createElement('canvas');\r\nconst overlayTemplateSuccess =\r\n  hasNavigator && hasDocument && document.createElement('canvas');\r\n\r\nlet itemShadowColor = [40, 40, 40];\r\nlet itemErrorColor = [196, 78, 71];\r\nlet itemSuccessColor = [54, 151, 99];\r\n\r\nif (hasNavigator && hasDocument) {\r\n  drawTemplate(overlayTemplateShadow, width, height, itemShadowColor, 0.85);\r\n  drawTemplate(overlayTemplateError, width, height, itemErrorColor, 1);\r\n  drawTemplate(overlayTemplateSuccess, width, height, itemSuccessColor, 1);\r\n}\r\n\r\nconst loadImage = (url, crossOriginValue) =>\r\n  new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    if (typeof crossOrigin === 'string') {\r\n      img.crossOrigin = crossOriginValue;\r\n    }\r\n    img.onload = () => {\r\n      resolve(img);\r\n    };\r\n    img.onerror = e => {\r\n      reject(e);\r\n    };\r\n    img.src = url;\r\n  });\r\n\r\nconst createPosterWrapperView = _ => {\r\n  // create overlay view\r\n  const overlay = createPosterOverlayView(_);\r\n\r\n  /**\r\n   * Write handler for when preview container has been created\r\n   */\r\n  const didCreatePreviewContainer = ({ root, props }) => {\r\n    const { id } = props;\r\n\r\n    // we need to get the file data to determine the eventual image size\r\n    const item = root.query('GET_ITEM', id);\r\n    if (!item) return;\r\n\r\n    // get url to file\r\n    const fileURL = item.getMetadata('poster');\r\n\r\n    // image is now ready\r\n    const previewImageLoaded = data => {\r\n      // calculate average image color, is in try catch to circumvent any cors errors\r\n      const averageColor = root.query(\r\n        'GET_FILE_POSTER_CALCULATE_AVERAGE_IMAGE_COLOR'\r\n      )\r\n        ? calculateAverageColor(data)\r\n        : null;\r\n      item.setMetadata('color', averageColor, true);\r\n\r\n      // the preview is now ready to be drawn\r\n      root.dispatch('DID_FILE_POSTER_LOAD', {\r\n        id,\r\n        data\r\n      });\r\n    };\r\n\r\n    // determine image size of this item\r\n    getImageSize(fileURL, (width, height) => {\r\n      // we can now scale the panel to the final size\r\n      root.dispatch('DID_FILE_POSTER_CALCULATE_SIZE', {\r\n        id,\r\n        width,\r\n        height\r\n      });\r\n\r\n      // create fallback preview\r\n      loadImage(\r\n        fileURL,\r\n        root.query('GET_FILE_POSTER_CROSS_ORIGIN_ATTRIBUTE_VALUE')\r\n      ).then(previewImageLoaded);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Write handler for when the preview has been loaded\r\n   */\r\n  const didLoadPreview = ({ root }) => {\r\n    root.ref.overlayShadow.opacity = 1;\r\n  };\r\n\r\n  /**\r\n   * Write handler for when the preview image is ready to be animated\r\n   */\r\n  const didDrawPreview = ({ root }) => {\r\n    const { image } = root.ref;\r\n\r\n    // reveal image\r\n    image.scaleX = 1.0;\r\n    image.scaleY = 1.0;\r\n    image.opacity = 1;\r\n  };\r\n\r\n  /**\r\n   * Write handler for when the preview has been loaded\r\n   */\r\n  const restoreOverlay = ({ root }) => {\r\n    root.ref.overlayShadow.opacity = 1;\r\n    root.ref.overlayError.opacity = 0;\r\n    root.ref.overlaySuccess.opacity = 0;\r\n  };\r\n\r\n  const didThrowError = ({ root }) => {\r\n    root.ref.overlayShadow.opacity = 0.25;\r\n    root.ref.overlayError.opacity = 1;\r\n  };\r\n\r\n  const didCompleteProcessing = ({ root }) => {\r\n    root.ref.overlayShadow.opacity = 0.25;\r\n    root.ref.overlaySuccess.opacity = 1;\r\n  };\r\n\r\n  /**\r\n   * Constructor\r\n   */\r\n  const create = ({ root, props }) => {\r\n    // test if colors aren't default item overlay colors\r\n    const itemShadowColorProp = root.query(\r\n      'GET_FILE_POSTER_ITEM_OVERLAY_SHADOW_COLOR'\r\n    );\r\n    const itemErrorColorProp = root.query(\r\n      'GET_FILE_POSTER_ITEM_OVERLAY_ERROR_COLOR'\r\n    );\r\n    const itemSuccessColorProp = root.query(\r\n      'GET_FILE_POSTER_ITEM_OVERLAY_SUCCESS_COLOR'\r\n    );\r\n\r\n    if (itemShadowColorProp && itemShadowColorProp !== itemShadowColor) {\r\n      itemShadowColor = itemShadowColorProp;\r\n      drawTemplate(overlayTemplateShadow, width, height, itemShadowColor, 0.85);\r\n    }\r\n    if (itemErrorColorProp && itemErrorColorProp !== itemErrorColor) {\r\n      itemErrorColor = itemErrorColorProp;\r\n      drawTemplate(overlayTemplateError, width, height, itemErrorColor, 1);\r\n    }\r\n    if (itemSuccessColorProp && itemSuccessColorProp !== itemSuccessColor) {\r\n      itemSuccessColor = itemSuccessColorProp;\r\n      drawTemplate(overlayTemplateSuccess, width, height, itemSuccessColor, 1);\r\n    }\r\n\r\n    // image view\r\n    const image = createPosterView(_);\r\n\r\n    // append image presenter\r\n    root.ref.image = root.appendChildView(\r\n      root.createChildView(image, {\r\n        id: props.id,\r\n        scaleX: 1.25,\r\n        scaleY: 1.25,\r\n        opacity: 0\r\n      })\r\n    );\r\n\r\n    // image overlays\r\n    root.ref.overlayShadow = root.appendChildView(\r\n      root.createChildView(overlay, {\r\n        template: overlayTemplateShadow,\r\n        opacity: 0\r\n      })\r\n    );\r\n\r\n    root.ref.overlaySuccess = root.appendChildView(\r\n      root.createChildView(overlay, {\r\n        template: overlayTemplateSuccess,\r\n        opacity: 0\r\n      })\r\n    );\r\n\r\n    root.ref.overlayError = root.appendChildView(\r\n      root.createChildView(overlay, {\r\n        template: overlayTemplateError,\r\n        opacity: 0\r\n      })\r\n    );\r\n  };\r\n\r\n  return _.utils.createView({\r\n    name: 'file-poster-wrapper',\r\n    create,\r\n    write: _.utils.createRoute({\r\n      // image preview stated\r\n      DID_FILE_POSTER_LOAD: didLoadPreview,\r\n      DID_FILE_POSTER_DRAW: didDrawPreview,\r\n      DID_FILE_POSTER_CONTAINER_CREATE: didCreatePreviewContainer,\r\n\r\n      // file states\r\n      DID_THROW_ITEM_LOAD_ERROR: didThrowError,\r\n      DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\r\n      DID_THROW_ITEM_INVALID: didThrowError,\r\n      DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\r\n      DID_START_ITEM_PROCESSING: restoreOverlay,\r\n      DID_REVERT_ITEM_PROCESSING: restoreOverlay\r\n    })\r\n  });\r\n};\r\n\r\n/**\r\n * File Poster Plugin\r\n */\r\nconst plugin = fpAPI => {\r\n  const { addFilter, utils } = fpAPI;\r\n  const { Type, createRoute } = utils;\r\n\r\n  // filePosterView\r\n  const filePosterView = createPosterWrapperView(fpAPI);\r\n\r\n  // called for each view that is created right after the 'create' method\r\n  addFilter('CREATE_VIEW', viewAPI => {\r\n    // get reference to created view\r\n    const { is, view, query } = viewAPI;\r\n\r\n    // only hook up to item view and only if is enabled for this cropper\r\n    if (!is('file') || !query('GET_ALLOW_FILE_POSTER')) return;\r\n\r\n    // create the file poster plugin, but only do so if the item is an image\r\n    const didLoadItem = ({ root, props }) => {\r\n      updateItemPoster(root, props);\r\n    };\r\n\r\n    const didUpdateItemMetadata = ({ root, props, action }) => {\r\n      if (!/poster/.test(action.change.key)) return;\r\n      updateItemPoster(root, props);\r\n    };\r\n\r\n    const updateItemPoster = (root, props) => {\r\n      const { id } = props;\r\n      const item = query('GET_ITEM', id);\r\n\r\n      // item could theoretically have been removed in the mean time\r\n      if (!item || !item.getMetadata('poster') || item.archived) return;\r\n\r\n      // don't update if is the same poster\r\n      if (root.ref.previousPoster === item.getMetadata('poster')) return;\r\n      root.ref.previousPoster = item.getMetadata('poster');\r\n\r\n      // test if is filtered\r\n      if (!query('GET_FILE_POSTER_FILTER_ITEM')(item)) return;\r\n\r\n      if (root.ref.filePoster) {\r\n        view.removeChildView(root.ref.filePoster);\r\n      }\r\n\r\n      // set preview view\r\n      root.ref.filePoster = view.appendChildView(\r\n        view.createChildView(filePosterView, { id })\r\n      );\r\n\r\n      // now ready\r\n      root.dispatch('DID_FILE_POSTER_CONTAINER_CREATE', { id });\r\n    };\r\n\r\n    const didCalculatePreviewSize = ({ root, action }) => {\r\n      // no poster set\r\n      if (!root.ref.filePoster) return;\r\n\r\n      // remember dimensions\r\n      root.ref.imageWidth = action.width;\r\n      root.ref.imageHeight = action.height;\r\n\r\n      root.ref.shouldUpdatePanelHeight = true;\r\n\r\n      root.dispatch('KICK');\r\n    };\r\n\r\n    const getPosterHeight = ({ root }) => {\r\n      let fixedPosterHeight = root.query('GET_FILE_POSTER_HEIGHT');\r\n\r\n      // if fixed height: return fixed immediately\r\n      if (fixedPosterHeight) {\r\n        return fixedPosterHeight;\r\n      }\r\n\r\n      const minPosterHeight = root.query('GET_FILE_POSTER_MIN_HEIGHT');\r\n      const maxPosterHeight = root.query('GET_FILE_POSTER_MAX_HEIGHT');\r\n\r\n      // if natural height is smaller than minHeight: return min height\r\n      if (minPosterHeight && root.ref.imageHeight < minPosterHeight) {\r\n        return minPosterHeight;\r\n      }\r\n\r\n      let height =\r\n        root.rect.element.width * (root.ref.imageHeight / root.ref.imageWidth);\r\n\r\n      if (minPosterHeight && height < minPosterHeight) {\r\n        return minPosterHeight;\r\n      }\r\n      if (maxPosterHeight && height > maxPosterHeight) {\r\n        return maxPosterHeight;\r\n      }\r\n\r\n      return height;\r\n    };\r\n\r\n    // start writing\r\n    view.registerWriter(\r\n      createRoute(\r\n        {\r\n          DID_LOAD_ITEM: didLoadItem,\r\n          DID_FILE_POSTER_CALCULATE_SIZE: didCalculatePreviewSize,\r\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\r\n        },\r\n        ({ root, props }) => {\r\n          // don't run without poster\r\n          if (!root.ref.filePoster) return;\r\n\r\n          // don't do anything while hidden\r\n          if (root.rect.element.hidden) return;\r\n\r\n          // should we redraw\r\n          if (root.ref.shouldUpdatePanelHeight) {\r\n            // time to resize the parent panel\r\n            root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\r\n              id: props.id,\r\n              height: getPosterHeight({ root })\r\n            });\r\n\r\n            // done!\r\n            root.ref.shouldUpdatePanelHeight = false;\r\n          }\r\n        }\r\n      )\r\n    );\r\n  });\r\n\r\n  // expose plugin\r\n  return {\r\n    options: {\r\n      // Enable or disable file poster\r\n      allowFilePoster: [true, Type.BOOLEAN],\r\n\r\n      // Fixed preview height\r\n      filePosterHeight: [null, Type.INT],\r\n\r\n      // Min image height\r\n      filePosterMinHeight: [null, Type.INT],\r\n\r\n      // Max image height\r\n      filePosterMaxHeight: [null, Type.INT],\r\n\r\n      // filters file items to determine which are shown as poster\r\n      filePosterFilterItem: [() => true, Type.FUNCTION],\r\n\r\n      // Enables or disables reading average image color\r\n      filePosterCalculateAverageImageColor: [false, Type.BOOLEAN],\r\n\r\n      // Allows setting the value of the CORS attribute (null is don't set attribute)\r\n      filePosterCrossOriginAttributeValue: ['Anonymous', Type.STRING],\r\n\r\n      // Colors used for item overlay gradient\r\n      filePosterItemOverlayShadowColor: [null, Type.ARRAY],\r\n      filePosterItemOverlayErrorColor: [null, Type.ARRAY],\r\n      filePosterItemOverlaySuccessColor: [null, Type.ARRAY]\r\n    }\r\n  };\r\n};\r\n\r\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\r\nconst isBrowser =\r\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\r\nif (isBrowser) {\r\n  document.dispatchEvent(\r\n    new CustomEvent('FilePond:pluginloaded', { detail: plugin })\r\n  );\r\n}\r\n\r\nexport default plugin;\r\n"],
  "mappings": "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",
  "names": ["width", "height", "averageColor"]
}
